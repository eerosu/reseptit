{% extends "layout.html" %}

{% block title %}{{ recipe.name }}{% endblock %}

{% block content %}
<h2>{{ recipe.name }}</h2>
{% if session.user_id == recipe.user_id %}
<p>
  <a href="/edit_recipe/{{ recipe.id }}">Muokkaa</a>
  <a href="/remove_recipe/{{ recipe.id }}">Poista</a>
</p>
{% endif %}
{% if classes %}
<p>
  Luokat:
  <ul>
    {% for class in classes %}
    <li>{{ class.title }}: {{ class.value }}</li>
    {% endfor %}
  </ul>
</p>
{% endif %}
<p>
  <h4>Ainekset:</h4>
  {{ recipe.ingredients }}
</p>
<p>
  <h4>Ohje:</h4>
  {{ recipe.instruction }}
</p>
<p>
  <a href="/user/{{ recipe.user_id }}">{{ recipe.username }}</a>
</p>
<h3>Arviot</h3>
{% if average %}
<p>
  Keskiarvo {{ average }} tähteä
</p>
{% else %}
<p>
  Ei vielä arvioita
</p>
{% endif %}
<ul>
  {% for rating in ratings %}
  <li>{{ rating.stars }}<br/>{{ rating.comments }} <br/><a href="/user/{{ rating.user_id }}">{{ rating.username }}</a></li>
  {% endfor %}
</ul>
<h3>Arvostele</h3>
<form action="/create_rating" method="POST">
  <div class="rating">
    <label>
      <input type="radio" name="rating" value="1">
      1
    </label>
    <label>
      <input type="radio" name="rating" value="2">
      2
    </label>
    <label>
      <input type="radio" name="rating" value="3">
      3
    </label>
    <label>
      <input type="radio" name="rating" value="4">
      4
    </label>
    <label>
      <input type="radio" name="rating" value="5">
      5
    </label>
  </div>
  <p>
    Kommentoi reseptiä: <br />
    <textarea name="comment" rows="8" cols="60" maxlength="1000" required></textarea>
  </p>
  <input type="hidden" name="recipe_id" value="{{ recipe.id }}">
  <button type="submit">Lähetä arvio</button>
</form>
{% endblock %}
